<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Products - Karthik Corp</title>
  <link rel="stylesheet" href="brand-template.css">
</head>
<body class="brand-body">
  <header class="brand-header">
    <div class="container">
      <a class="logo" href="index.html">Karthik <span>The Brand</span></a>
      <nav class="nav">
        <a href="products.html">Products</a>
        <a href="solutions.html">Solutions</a>
        <a class="btn" href="about.html">About</a>
        <a class="cart-link" href="checkout.html">
          <span class="cart-icon">ðŸ›’</span>
          <span class="cart-badge" id="cart-badge">0</span>
          <span class="cart-total" id="cart-total">â‚¹0.00</span>
        </a>
      </nav>
    </div>
  </header>
  <main>
    <section class="products container">
      <h1>Our Products</h1>
      <div id="product-list" class="product-grid">
        <!-- Products will be dynamically loaded here -->
      </div>
    </section>
  </main>

  <footer class="brand-footer">
    <div class="container footer-grid">
      <div>
        <h4>Karthik Corp Co.</h4>
        <p>Â© <span id="year"></span> Karthik Corporation. All rights reserved.</p>
      </div>
      <div class="footer-links">
        <a href="privacy.html">Privacy</a>
        <a href="terms.html">Terms</a>
        <a href="careers.html">Careers</a>
        <a href="admin.html">Admin</a>
      </div>
    </div>
  </footer>

  <script src="js/storage-manager.js"></script>
  <script src="js/cart-manager.js"></script>
  <script src="js/product-manager.js"></script>
  <script src="js/currency-converter.js"></script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Initialize and display products
    async function loadProducts() {
      const products = await ProductManager.initializeProducts();
      const productList = document.getElementById('product-list');
      
      productList.innerHTML = products.map(product => `
        <div class="product-card">
          <div class="product-image">
            <img src="${product.image}" alt="${product.name}" onerror="this.src='https://via.placeholder.com/400x300?text=${encodeURIComponent(product.name)}'">
          </div>
          <div class="product-info">
            <h3>${product.name}</h3>
            <p class="product-description">${product.description}</p>
            <p class="product-price"><strong>${CurrencyConverter.formatUSDToINR(product.price)}</strong></p>
            <button class="btn btn-primary add-to-cart-btn" data-product-id="${product.id}">
              Add to Cart
            </button>
          </div>
        </div>
      `).join('');

      // Add event listeners to Add to Cart buttons
      document.querySelectorAll('.add-to-cart-btn').forEach(button => {
        button.addEventListener('click', function() {
          const productId = this.getAttribute('data-product-id');
          const product = products.find(p => p.id === productId);
          if (product) {
            CartManager.addItem(product, 1);
            // Show feedback
            this.textContent = 'Added!';
            this.style.background = '#00bfa6';
            setTimeout(() => {
              this.textContent = 'Add to Cart';
              this.style.background = '';
            }, 1000);
          }
        });
      });

      // Animate products on load
      animateProducts();
    }

    // Animate products on load
    function animateProducts() {
      const productCards = document.querySelectorAll('.product-card');
      productCards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        setTimeout(() => {
          card.style.transition = 'opacity 0.5s, transform 0.5s';
          card.style.opacity = '1';
          card.style.transform = 'translateY(0)';
        }, index * 100); // Stagger animation
      });
    }

    // Initialize cart UI
    CartManager.updateCartUI();

    // Load products
    loadProducts();
  </script>
</body>
</html>